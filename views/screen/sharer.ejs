<%- include('../partials/head') %>
</head>

<body class="bg-gray-100 min-h-screen text-gray-800">
    <%- include('../partials/nav') %>

    <span id="current-user-id" data-user-id="<%= sharerId %>" class="hidden"></span>

    <main class="p-4 max-w-6xl mx-auto">
        
        <h1 class="text-3xl font-extrabold text-red-600 mt-4">ðŸ”´ Sharing Your Screen</h1>
        <p class="text-lg mt-2">Currently sharing with User ID: <span class="font-mono bg-gray-200 px-2 py-1 rounded text-sm"><%= viewerId %></span></p>
        
        <hr class="my-6">

        <div id="local-stream-container" class="mt-8 bg-white p-6 rounded-lg shadow-xl" style="display:none;">
            <h2 class="text-xl font-semibold mb-4">Your Local View</h2>
            <div class="flex justify-center">
                <video id="local-video" 
                       autoplay 
                       muted 
                       playsinline 
                       class="w-full max-w-4xl border-4 border-gray-300 rounded-lg shadow-inner">
                </video>
            </div>
        </div>

        <div class="mt-8">
            <p id="sharing-status" class="text-xl font-medium text-green-600">Status: Waiting for WebRTC connection...</p>
        </div>

        <button id="stop-sharing-btn" class="mt-8 bg-red-600 hover:bg-red-700 text-white font-bold py-3 px-6 rounded-lg shadow-md transition duration-200">
            Stop Sharing
        </button>
    </main>

<script>
  window.CURRENT_USER_NAME = "Sharer";
</script>

    <script src="/socket.io/socket.io.js"></script>
    <script src="/js/webrtc.js"></script> 
    <script src="/js/sharer.js"></script> 
</body>
</html>
